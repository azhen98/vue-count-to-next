(function(t,w){typeof exports=="object"&&typeof module!="undefined"?module.exports=w(require("vue")):typeof define=="function"&&define.amd?define(["vue"],w):(t=typeof globalThis!="undefined"?globalThis:t||self,t.CountTo=w(t.Vue))})(this,function(t){"use strict";function w(){let e=0;const c=typeof window=="undefined";let n,a;return c?(n=function(){return 0},a=function(){}):(n=window.requestAnimationFrame,a=window.cancelAnimationFrame,console.log(typeof n),typeof n!="function"&&typeof a!="function"&&(n=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,a=window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame),(!n||!a)&&(n=function(u){const o=new Date().getTime(),m=Math.max(0,16-(o-e)),s=window.setTimeout(()=>{u(o+m)},m);return e=o+m,s},a=function(u){window.clearTimeout(u)})),{requestAnimationFrame:n,cancelAnimationFrame:a}}var N=(e,c)=>{const n=e.__vccOpts||e;for(const[a,u]of c)n[a]=u;return n};const R=t.defineComponent({name:"CountTo",emits:["mountedCallback","callback"],props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:2017},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimal:{type:String,required:!1,default:"."},decimals:{type:Number,required:!1,default:0,validator:e=>e>=0},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Object,required:!1,default:void 0}},setup(e,c){const n=(f,r,_,V)=>_*(-Math.pow(2,-10*f/V)+1)*1024/1023+r,a=e.easingFn||n,u=f=>!isNaN(parseFloat(f)),o=(f=0,r=0)=>{const V=f.toFixed(r).split(".");let F=V[0];const E=V.length>1?e.decimal+V[1]:"",k=/(\d+)(\d{3})/;if(e.separator&&!u(e.separator))for(;k.test(F);)F=F.replace(k,"$1"+e.separator+"$2");return e.prefix+F+E+e.suffix},m=t.ref(o(e.startVal));let s=0,h=0,d=e.duration||3e3,l=e.startVal||0,i=0,q=!1,y=0;const{requestAnimationFrame:g,cancelAnimationFrame:A}=w(),b=t.computed(()=>e.startVal>e.endVal),x=f=>{s||(s=f);const r=f-s;h=d-r,e.useEasing?b.value?i=l-a(r,0,l-e.endVal,d):i=a(r,l,e.endVal-l,d):b.value?i=l-(l-e.endVal)*(r/d):i=l+(e.endVal-l)*(r/d),b.value?i=i<e.endVal?e.endVal:i:i=i>e.endVal?e.endVal:i,m.value=o(i),r<d?y=g(x):c.emit("callback")},T=()=>{l=e.startVal,s=0,d=e.duration,q=!1,y=g(x)},C=()=>{A(y)},S=()=>{s=0,d=+h,l=+i,g(x)},B=()=>{s=0,A(y),m.value=o(e.startVal)},D=()=>{q?(S(),q=!1):(C(),q=!0)};return t.onBeforeUnmount(()=>{A(y)}),t.onMounted(()=>{e.autoplay&&T(),c.emit("mountedCallback")}),t.watch(()=>e.startVal+e.endVal,()=>{e.autoplay&&T()}),{displayValue:m,start:T,pause:C,resume:S,reset:B,pauseResume:D}}});function v(e,c,n,a,u,o){return t.openBlock(),t.createElementBlock("span",null,t.toDisplayString(e.displayValue),1)}var $=N(R,[["render",v]]);return $});
